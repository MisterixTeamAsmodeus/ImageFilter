#pragma once

#include <utils/FilterResult.h>
#include <string>

class ImageProcessor;

/**
 * @brief Базовый интерфейс для всех фильтров изображений
 * 
 * Использует полиморфизм для единообразной работы с различными фильтрами.
 * Все фильтры должны наследоваться от этого интерфейса и реализовывать метод apply().
 * 
 * Особенности C++20:
 * - Использует виртуальный деструктор для корректного удаления объектов через указатель на базовый класс
 * - Позволяет работать с фильтрами через указатели на интерфейс (паттерн Strategy)
 * - Использует FilterResult для структурированной обработки ошибок
 */
class IFilter {
public:
    /**
     * @brief Виртуальный деструктор
     * 
     * Необходим для корректного удаления объектов через указатель на базовый класс.
     * Определение вынесено в .cpp файл для предотвращения создания vtable в каждой единице трансляции.
     */
    virtual ~IFilter();

    /**
     * @brief Применяет фильтр к изображению
     * @param image Обрабатываемое изображение
     * @return FilterResult с кодом ошибки и опциональным сообщением
     */
    virtual FilterResult apply(ImageProcessor& image) = 0;

    /**
     * @brief Возвращает имя фильтра
     * @return Строка с именем фильтра
     */
    [[nodiscard]] virtual std::string getName() const = 0;

    /**
     * @brief Возвращает описание фильтра
     * @return Строка с описанием фильтра
     */
    [[nodiscard]] virtual std::string getDescription() const = 0;

    /**
     * @brief Возвращает категорию фильтра
     * @return Строка с категорией (например, "Цветовой", "Геометрический", "Края и детали", "Размытие и шум", "Стилистический")
     */
    [[nodiscard]] virtual std::string getCategory() const = 0;

};

