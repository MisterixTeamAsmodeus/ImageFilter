# ImageFilter - Приложение для обработки JPEG-изображений

Высокопроизводительное консольное приложение на C++20 для применения фильтров к JPEG-изображениям с самостоятельной реализацией всех алгоритмов обработки изображений.

## Технические характеристики

- **Язык**: C++20
- **Компилятор**: Clang (предпочтительно)
- **Библиотеки**: STB Image (автоматически загружается через CMake FetchContent)
- **Система сборки**: CMake 3.20+

## Реализованные фильтры

1. **Grayscale** - Преобразование в оттенки серого
   - Формула: Y = 0.299R + 0.587G + 0.114B
   - Основана на восприятии яркости человеческим глазом

2. **Gaussian Blur** - Размытие по Гауссу
   - Использует separable kernel для оптимизации производительности
   - Радиус размытия: 5.0 (по умолчанию)
   - Оптимизация: O(2N) вместо O(N²) операций на пиксель

3. **Sharpen** - Повышение резкости
   - Использует классическое ядро unsharp masking
   - Усиливает края и детали изображения

## Сборка проекта

### Требования

- CMake 3.20 или выше
- Компилятор Clang с поддержкой C++20 (рекомендуется)
- Git (для загрузки STB Image через FetchContent)

### Инструкция по сборке

#### Windows (с использованием Clang)

```powershell
# Создаем директорию для сборки
mkdir build
cd build

# Настраиваем проект с указанием Clang
cmake .. -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_BUILD_TYPE=Release

# Собираем проект
cmake --build . --config Release

# Исполняемый файл будет в build/bin/ImageFilter.exe
```

#### Linux/macOS (с использованием Clang)

```bash
# Создаем директорию для сборки
mkdir build
cd build

# Настраиваем проект с указанием Clang
cmake .. -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_BUILD_TYPE=Release

# Собираем проект
cmake --build . --config Release

# Исполняемый файл будет в build/bin/ImageFilter
```

### Альтернативная сборка (если Clang недоступен)

Если Clang не установлен, проект можно собрать с другим компилятором C++20:

```bash
mkdir build
cd build
cmake .. -DCMAKE_BUILD_TYPE=Release
cmake --build . --config Release
```

## Использование

### Синтаксис команды

```bash
./ImageFilter <input.jpg> <filter_name> <output.jpg>
```

### Параметры

- `input.jpg` - путь к входному JPEG-изображению
- `filter_name` - название фильтра (grayscale, blur, sharpen)
- `output.jpg` - путь к выходному JPEG-изображению

### Примеры использования

#### Преобразование в оттенки серого

```bash
./ImageFilter input.jpg grayscale output_gray.jpg
```

#### Применение размытия по Гауссу

```bash
./ImageFilter input.jpg blur output_blurred.jpg
```

#### Повышение резкости

```bash
./ImageFilter input.jpg sharpen output_sharpened.jpg
```

## Особенности реализации

### Использование возможностей C++20

1. **RAII (Resource Acquisition Is Initialization)**
   - Использование `std::vector` для автоматического управления памятью
   - Исключение утечек памяти без явного освобождения

2. **Современные атрибуты**
   - `[[nodiscard]]` для функций, результат которых не должен игнорироваться
   - `noexcept` для функций, которые не выбрасывают исключения

3. **Лямбда-функции и std::function**
   - Использование в `main.cpp` для гибкой системы фильтров
   - Позволяет легко расширять список фильтров

4. **constexpr**
   - Использование для констант времени компиляции (коэффициенты фильтров)

### Оптимизации производительности

1. **Separable Kernel для Gaussian Blur**
   - Вместо применения двумерного ядра N×N (O(N²) операций)
   - Применяется одномерное ядро дважды: горизонтально и вертикально (O(2N) операций)
   - Значительное ускорение для больших радиусов размытия

2. **Обработка границ**
   - Использование отражения (mirroring) вместо обрезки или заполнения нулями
   - Предотвращает артефакты на краях изображения

3. **Локальность данных**
   - Использование непрерывных массивов (`std::vector`)
   - Улучшает использование кэша процессора

## Структура проекта

```
ImageFilter/
├── CMakeLists.txt          # Конфигурация сборки
├── README.md               # Документация
├── include/
│   ├── ImageProcessor.h    # Класс для работы с изображениями
│   └── filters/
│       ├── GrayscaleFilter.h
│       ├── GaussianBlurFilter.h
│       └── SharpenFilter.h
└── src/
    ├── main.cpp            # Точка входа приложения
    ├── ImageProcessor.cpp
    └── filters/
        ├── GrayscaleFilter.cpp
        ├── GaussianBlurFilter.cpp
        └── SharpenFilter.cpp
```

## Принципы проектирования

- **SOLID**: Код следует принципам SOLID
  - Single Responsibility: каждый класс отвечает за одну задачу
  - Open/Closed: легко добавлять новые фильтры без изменения существующего кода

- **KISS (Keep It Simple, Stupid)**: Простые и понятные решения
  - Прямолинейная реализация алгоритмов
  - Минимум абстракций там, где они не нужны

- **Модульность**: Четкое разделение на компоненты
  - Отдельные классы для каждого фильтра
  - Изоляция логики обработки изображений

## Зависимости

- **STB Image** (stb_image.h, stb_image_write.h)
  - Автоматически загружается через CMake FetchContent
  - Используется только для чтения и записи JPEG-файлов
  - Все алгоритмы обработки реализованы самостоятельно

## Лицензия

Учебный проект для изучения обработки изображений на C++20.

